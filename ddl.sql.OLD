-- CS340 Project Step 2 - Group 49
-- Team: Salim Mohamed & Ky Veney
-- Purpose: Old Schema (DDL) and example data inserts for Tech R Us Sales Management System kept for reference documentation

-- -----------------------------
-- Table: Customers
-- -----------------------------
CREATE TABLE `Customers` (
  `CustomerID` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `FirstName` VARCHAR(100) NOT NULL,
  `LastName` VARCHAR(100) NOT NULL,
  `Email` VARCHAR(100) NOT NULL,
  `PhoneNumber` VARCHAR(10) NULL,
  `Address` VARCHAR(255) NULL,
  PRIMARY KEY (`CustomerID`),
  UNIQUE KEY `UQ_Customers_Email` (`Email`)
);

-- -----------------------------
-- Table: SalesAssociates
-- -----------------------------
CREATE TABLE `SalesAssociates` (
  `AssociateID` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `FirstName` VARCHAR(100) NOT NULL,
  `LastName` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`AssociateID`)
);

-- -----------------------------
-- Table: Manufacturers
-- -----------------------------
CREATE TABLE `Manufacturers` (
  `ManufacturerID` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ManufacturerName` VARCHAR(100) NOT NULL,
  `ContactEmail` VARCHAR(100) NULL,
  PRIMARY KEY (`ManufacturerID`)
);

-- -----------------------------
-- Table: Products
-- -----------------------------
CREATE TABLE `Products` (
  `ProductID` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ProductName` VARCHAR(100) NOT NULL,
  `ProductDescription` TEXT NOT NULL,
  `Price` DECIMAL(10,2) NOT NULL,
  `StockQty` INT NOT NULL,
  `Type` VARCHAR(50) NULL,
  `ManufacturerID` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ProductID`),
  KEY `IX_Products_ManufacturerID` (`ManufacturerID`),
  CONSTRAINT `FK_Products_Manufacturers`
    FOREIGN KEY (`ManufacturerID`) REFERENCES `Manufacturers` (`ManufacturerID`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE
);

-- -----------------------------
-- Table: Sales 
-- -----------------------------
CREATE TABLE `Sales` (
  `SaleID` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `CustomerID` INT UNSIGNED NOT NULL,
  `OrderDate` DATETIME NOT NULL,
  `Status` VARCHAR(50) NOT NULL,
  `AssociateID` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`SaleID`),
  KEY `IX_Sales_CustomerID` (`CustomerID`),
  KEY `IX_Sales_AssociateID` (`AssociateID`),
  CONSTRAINT `FK_Sales_Customers`
    FOREIGN KEY (`CustomerID`) REFERENCES `Customers` (`CustomerID`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `FK_Sales_SalesAssociates`
    FOREIGN KEY (`AssociateID`) REFERENCES `SalesAssociates` (`AssociateID`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE
);

-- -----------------------------
-- Table: SalesDetails
-- -----------------------------
CREATE TABLE `SalesDetails` (
  `SalesItemID` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `SaleID` INT UNSIGNED NOT NULL,
  `ProductID` INT UNSIGNED NOT NULL,
  `ItemPrice` DECIMAL(10,2) NOT NULL, 
  `Quantity` INT NOT NULL,
  PRIMARY KEY (`SalesItemID`),
  KEY `IX_SalesDetails_SaleID` (`SaleID`),
  KEY `IX_SalesDetails_ProductID` (`ProductID`),
  CONSTRAINT `FK_SalesDetails_Sales`
    FOREIGN KEY (`SaleID`) REFERENCES `Sales` (`SaleID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_SalesDetails_Products`
    FOREIGN KEY (`ProductID`) REFERENCES `Products` (`ProductID`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE
);

-- =============================================
-- Example Data (3-5 rows per table)
-- =============================================

-- Customers
INSERT INTO `Customers` (`FirstName`, `LastName`, `Email`, `PhoneNumber`, `Address`) VALUES
('Alice', 'Nguyen', 'alice.nguyen@example.com', '5415551234', '123 Maple St, Corvallis, OR'),
('Bob', 'Martinez', 'bob.martinez@example.com', NULL, '456 Oak Ave, Albany, OR'),
('Carol', 'Lee', 'carol.lee@example.com', '5415557890', NULL),
('David', 'Kim', 'david.kim@example.com', '5415552222', '789 Pine Rd, Salem, OR');

-- SalesAssociates
INSERT INTO `SalesAssociates` (`FirstName`, `LastName`) VALUES
('Jenna', 'Stone'),
('Ravi', 'Patel'),
('Mia', 'Gonzalez');

-- Manufacturers
INSERT INTO `Manufacturers` (`ManufacturerName`, `ContactEmail`) VALUES
('ApexTech', 'support@apextech.com'),
('NovaGear', 'sales@novagear.com'),
('BlueWave', NULL);

-- Products
INSERT INTO `Products` (`ProductName`, `ProductDescription`, `Price`, `StockQty`, `Type`, `ManufacturerID`) VALUES
('Apex Laptop 14', '14-inch lightweight laptop with 16GB RAM', 899.99, 25, 'Laptop', 1),
('Nova Tablet 10', '10-inch tablet with stylus support', 349.50, 40, 'Tablet', 2),
('BlueWave Mouse', 'Ergonomic wireless mouse', 29.99, 100, 'Accessory', 3),
('Apex USB-C Hub', '7-in-1 USB-C docking station', 59.95, 60, 'Accessory', 1),
('Nova Keyboard', 'Compact mechanical keyboard', 79.00, 50, 'Accessory', 2);

-- Sales
INSERT INTO `Sales` (`CustomerID`, `OrderDate`, `Status`, `AssociateID`) VALUES
(1, '2025-10-01 10:15:00', 'Paid', 1),
(2, '2025-10-02 14:30:00', 'Paid', 2),
(3, '2025-10-03 09:05:00', 'Pending', 3);

-- SalesDetails
-- Sale 1
INSERT INTO `SalesDetails` (`SaleID`, `ProductID`, `ItemPrice`, `Quantity`) VALUES
(1, 1, 899.99, 1),
(1, 3, 24.99, 2); 

-- Sale 2
INSERT INTO `SalesDetails` (`SaleID`, `ProductID`, `ItemPrice`, `Quantity`) VALUES
(2, 2, 349.50, 1),
(2, 5, 79.00, 1);

-- Sale 3
INSERT INTO `SalesDetails` (`SaleID`, `ProductID`, `ItemPrice`, `Quantity`) VALUES
(3, 4, 59.95, 1);
